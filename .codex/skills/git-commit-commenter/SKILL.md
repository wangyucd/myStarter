---
name: git-commit-commenter
description: 根据当前仓库已暂存变更生成精简中文提交注释文本。适用于用户要求“根据 diff 生成提交文案”等场景，仅返回文案，不执行 git commit。
---

# Git 提交注释生成器

从当前仓库变更生成精简中文提交文案。

## 工作流

1. 优先读取已暂存差异（`git diff --staged`）。
2. 仅以已暂存内容为依据生成文案。
3. 从真实 diff 中提炼精简、客观的中文摘要。
4. 只返回单行提交文案，不执行 `git commit`。

## 采集 Diff

优先使用技能内置脚本：

```bash
scripts/collect_diff.sh
```

若脚本不可用，使用后备命令：

```bash
git diff --staged
```

选择规则：

1. 只使用已暂存 diff（`git diff --staged`）。
2. 如果已暂存 diff 为空，返回：`无已暂存变更可生成文案。`

## 生成规则

- 提交前缀固定使用 `feat`。
- 摘要必须精简、客观，仅使用中文。
- 若存在多个关键改动，使用中文逗号（`，`）在单行中连接。

## 输出模板

始终输出如下最小结构：

```text
feat：<摘要1>，<摘要2>，<摘要3>
```

约束：

- 仅输出一行。
- 每个摘要保持精简且客观。
- 不得编造 diff 中不存在的行为。
- 除非用户另行要求，不包含执行命令说明。
